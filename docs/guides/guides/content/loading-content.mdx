---
sidebar_position: 2
---

# Loading Content

Loading content is a crucial part of any game. The process of loading and unloading content is important
for not only performance by getting the content loaded into memory before it is needed, but also for
managing the total memory of the game by unloading content that is no longer needed.


## <span className="color-step">Types of content</span>

The types of content supported by Velaptor are:

| Content Type | Format Types |
|:--------:|:-----------------------------------:|
| Textures | .png                                |
| Audio    | .ogg, .mp3                          |
| Atlas    | .png with .json                     |
| Fonts    | .ttf                                |

These formats are well-known. More formats will be added in the future as needed.


## <span className="color-step">Content caching</span>

Caching content is done automatically in Velaptor. This caching helps significantly improve the performance of loading content.
All content types are cached until the content item is unloaded. If you want to take advantage of a texture that is already loaded
and cached and wish to use it in another part of your game, you can do so by not unloading the content item.

When loading a content item with the same name later, Velaptor will check to see if it is already loaded and cached. If so, it will
just use the cached content and the content item does not need to be loaded again.

Velaptor uses the file's fully qualified path to identify if the file is cached.

Velaptor can't know when content is needed or not. Managing the content is put into the hands of the game developer. The game developer is responsible for loading and unloading content as required.


## <span className="color-step">Content paths</span>

You can use various types of paths in Velaptor to load content. Depending on the path, Velaptor will automatically determine where the content is located based on whether you are using relative or absolute paths.

### <span className="color-sub-step">Relative paths</span>

By default, Velaptor looks for content in the following locations:

- Graphics: `<proj-path>/Content/Graphics`
- Audio: `<proj-path>/Content/Audio`
- Atlas: `<proj-path>/Content/Atlas`
- Fonts: `<proj-path>/Content/Fonts`

When loading content with relative paths, these paths are _**relative**_ to the content folder based on its content type.

For example, to load a texture named _**velaptor-logo.png**_:

```csharp showLineNumbers
const logoPath = "velaptor-logo";

var contentManager = ContentManager.Create();
contentManager.Load<ITexture>(logoPath);
```

Notice the path excludes the `Content/Graphics` directory and a file extension. Velaptor automatically looks in the correct content directory based on the loader type.

:::tip Default Paths
Relative file paths tell Velaptor to load content from the default content folder for that content type.
:::

### <span className="color-sub-step">Absolute paths</span>

You can also use absolute paths to load content. Absolute paths give you more control over where you want to put your content.
Remember, though, if you want to avoid having to use fully qualified paths every time you load content, you will need to
implement your own solution for resolving content paths.

### <span className="color-sub-step">File extensions</span>

You can include or exclude the file extension when using absolute or relative paths. Not including the file extension tells Velaptor
to look for files with the supported formats in a particular order until the file is found.

For example, with audio, you can use _**ogg**_ or _**mp3**_ files. If you do not include the file extension, Velaptor will
first look for an _**ogg**_ file with the same base file name, and if not found, it will look for an _**mp3**_ file with the same name.
If neither file format exists, an exception will be thrown.

:::info Auto File Format Loading
The only content type requiring some forethought into multiple formats is audio.
:::

:::tip File Extensions
Using unique base file names across different format types eliminates the need to specify file extensions.
For example, _**explosion-1.ogg**_ and _**explosion-2.mp3**_ can both be loaded without extensions since their base names differ.
:::


## <span className="color-step">Loading content</span>

Create a `ContentManager` instance and use it to load the type of content you need.

```csharp showLineNumbers
protected override void OnLoad()
{
    var contentManager = ContentManager.Create();

    // Loading textures
    var texture = contentManager.Load<ITexture>("velaptor-logo");

    // Loading audio
    var audio = contentManager.Load<IAudio>("ice-beam");

    // Loading atlas data
    var atlas = contentManager.Load<IAtlasData>("level-1-atlas");

    // Loading fonts
    var font = contentManager.Load<IFont>("game-throne");
}
```

### <span className="color-sub-step">Loading different buffer types</span>

When loading audio using the `ContentManager.Load<IAudio>()` method, you are not specifying
the type of audio buffer you want to use. By default, the `Load<IAudio>()` method will load
the audio using the `AudioBuffer.Full` buffer type. If you want to use a different audio buffer type,
you can use the `LoadAudio()` method as shown below.

```csharp showLineNumbers
var contentManager = ContentManager.Create();
var audio = contentManager.LoadAudio("ice-beam", AudioBuffer.Stream);
```

### <span className="color-sub-step">Loading different font sizes</span>

When loading fonts using the `ContentManager.Load<IFont>()` method, you are not specifying
the size of the font you want to use. By default, the `Load<IFont>()` method will load
the font using a size of 12 points. If you want to have control over the size of the font,
you can use the `LoadFont()` method as shown below.

```csharp showLineNumbers
var contentManager = ContentManager.Create();
var font = contentManager.LoadFont("game-font", 16);
```

## <span className="color-step">Unloading content</span>

To keep memory usage low, unload content when it's no longer needed.
For example, unload level-specific content before loading the next level.

Unload your content in the `OnUnload()` in your derived `Window` class or in the `UnloadContent()` method
of your derived `SceneBase` class.

```csharp showLineNumbers
protected override void OnUnload()
{
    // Unloading textures
    this.contentManager.Unload(texture);

    // Unloading audio
    this.contentManager.Unload(audio);

    // Unloading atlas'
    this.contentManager.Unload(atlas);

    // Unloading fonts
    this.contentManager.Unload(font);
}
```

:::note Unloading Content
Remember, to unload content, you are not only freeing up memory but also removing the content from the cache.
This means that the next time you load the exact same content, it will have to be fully loaded again.

Loading content that is uncached is a slower process than a cached content item.
:::


## <span className="color-step">Cross-platform features</span>

Velaptor is cross-platform and handles path differences between operating systems automatically.
Windows supports both backslashes and forward slashes, while POSIX systems (Linux, MacOS) use only forward slashes.
You can use either slash type, and Velaptor will ensure the path works correctly on each platform.

:::caution Fully Qualified Paths
Fully qualified paths bypass Velaptor's automatic content directory resolution. Velaptor will convert `Windows` paths to `POSIX` paths automatically, but not vice versa.

Avoid hard-coded fully qualified paths! If implementing custom path resolution, use the built-in dotnet `Path` class to ensure cross-platform compatibility.
:::
